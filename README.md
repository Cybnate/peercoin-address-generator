# Running wallet via docker - Instructions

1. Clone this repo **locally** on **master branch** and run build instructions;
2. Clone this repo **on server** on **docker branch**;
3. Copy `/public` content from **local** to `/public` folder on **docker branch** you cloned in **server**;
4. Run: `docker build -t ppc-wallet .`;
5. Run: `docker run --name ppc-wallet-nginx --restart on-failure -p 5001:80 ppc-wallet`.

The Reverse-proxy and SSL files are located on local NGINX (outside of docker). They can be found at: `/etc/nginx/sites-available/default`.

SSL is generated by Let's Encrypt via certbot.

The URLs addressed are:

https://hodl.peercoin.net/
https://paperwallet.peercoin.net/

In order to update SSL certificate, run the command below:

```
sudo systemctl stop nginx && sudo certbot certonly --standalone -d hodl.peercoin.net -d paperwallet.peercoin.net && sudo systemctl start nginx
```

The configuration used at `/etc/nginx/sites-available/default` is:

<details>
  
```
# Peercoin Wallet configs

upstream ppc-wallet-generator {
  server 127.0.0.1:5001;
}

server {
  listen 80;
  server_name hodl.peercoin.net paperwallet.peercoin.net;
  
  location / {
    proxy_pass http://ppc-wallet-generator;
  }

  listen 443 ssl;
  ssl_certificate /etc/letsencrypt/live/hodl.peercoin.net/fullchain.pem;
  ssl_certificate_key /etc/letsencrypt/live/hodl.peercoin.net/privkey.pem;
  include /etc/nginx/conf.d/ssl.conf;
}
```

</details>
